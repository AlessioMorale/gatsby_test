{"componentChunkName":"component---src-templates-blog-post-js","path":"/2017-11-01-setting-realsense-r200-odroid-xu4-ros/","webpackCompilationHash":"10cd070436fb7f59ed25","result":{"data":{"site":{"siteMetadata":{"title":"A*Morale","author":"Alessio Morale"}},"markdownRemark":{"id":"d3bc6233-5f83-54a8-abf1-446a3ce7cb78","excerpt":"Update 1st may 2018: added a note to use realsense nodelet tag 1.8.1 and some patches to use ROS built from sources or GCC7. This post will guide you throughâ€¦","html":"<p><em>Update 1st may 2018: added a note to use realsense nodelet tag 1.8.1 and some patches to use ROS built from sources or GCC7.</em></p>\n<p>This post will guide you through the configuration of a Realsense R200 on Odroid XU4. There is nothing strictly related to this platform so they should apply to any armhf/x86 Ubuntu 16.04.xx systems.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/71420/DSC_0321.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin: 7vw 0; max-width: 1360px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.01082719792119%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwAB/9oADAMBAAIQAxAAAAEjc5oKaVZf/8QAGxAAAgMAAwAAAAAAAAAAAAAAAQIDERIAEyL/2gAIAQEAAQUC7CDBK5Z4cNRu/O75/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAEREv/aAAgBAwEBPwGpZf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAERL/2gAIAQIBAT8BcLtv/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERIQMSInGh/9oACAEBAAY/AuPpesdELI0ihIpSf//EABsQAQACAgMAAAAAAAAAAAAAAAEAESFRMUFx/9oACAEBAAE/IREA1pER7bS55EAuKprmCNAnfS3P/9oADAMBAAIAAwAAABAjL//EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8Qo3cIP//EABkRAQACAwAAAAAAAAAAAAAAAAEAESFRwf/aAAgBAgEBPxBAUZm7k//EAB0QAQEAAgIDAQAAAAAAAAAAAAERACExcUFRYZH/2gAIAQEAAT8QMcRyUXrrBAAJo2+nzlTQxET9yHABtd4Kaqh91l7zgpDP/9k='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/53e9f/DSC_0321.webp 340w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/0991f/DSC_0321.webp 680w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/9d77c/DSC_0321.webp 1360w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/27063/DSC_0321.webp 2040w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/82c87/DSC_0321.webp 2720w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/483c1/DSC_0321.webp 4618w\"\n          sizes=\"(max-width: 1360px) 100vw, 1360px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/a0703/DSC_0321.jpg 340w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/5041d/DSC_0321.jpg 680w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/fe1b8/DSC_0321.jpg 1360w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/25fce/DSC_0321.jpg 2040w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/9bc5d/DSC_0321.jpg 2720w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/71420/DSC_0321.jpg 4618w\"\n          sizes=\"(max-width: 1360px) 100vw, 1360px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/fe1b8/DSC_0321.jpg\"\n          alt=\"DSC 0321\"\n          title=\"\"\n          src=\"/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/fe1b8/DSC_0321.jpg\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Letâ€™s start from the requirements:</p>\n<ul>\n<li>an Ubuntu 16.04.xx installation;</li>\n<li>ROS Kinetic (<a href=\"http://wiki.ros.org/kinetic/Installation/Ubuntu\">installation instructions</a>);</li>\n<li>obviously a Realsense R200 ðŸ™‚</li>\n</ul>\n<h3>Preparing the workspace</h3>\n<p>Skip this section if you have already a workspace.</p>\n<p>If donâ€™t, letâ€™s do it now (remember to â€˜source /opt/ros/kinetic/setup.bashâ€™ in case you have not added it to your .bashrc):</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p ros_ws/src\n<span class=\"token builtin class-name\">cd</span> ros_ws/src\ncatkin_init_workspace<span class=\"token operator\">&lt;</span>/pre<span class=\"token operator\">></span></code></pre></div>\n<h3>Prerequisites</h3>\n<p>Librealsense requires some prerequisites to be built:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> libusb-1.0-0-dev pkg-config libglfw3-dev</code></pre></div>\n<h3>Cloning the repositories</h3>\n<p>now itâ€™s time to clone the <a href=\"https://github.com/IntelRealSense/librealsense\">librealsense</a> and the <a href=\"https://github.com/intel-ros/realsense\">Realsense nodelet</a>Â repo:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#librealsense</span>\n<span class=\"token function\">git</span> clone https://github.com/IntelRealSense/librealsense.git\n<span class=\"token builtin class-name\">cd</span> librealsense\n<span class=\"token function\">git</span> checkout v1.12.1\n<span class=\"token comment\">#setup udev rules. Connect or reconnect the camera the camera after the following two lines are executed</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> config/99-realsense-libusb.rules /etc/udev/rules.d/\n<span class=\"token function\">sudo</span> udevadm control --reload-rules <span class=\"token operator\">&amp;&amp;</span> udevadm trigger</code></pre></div>\n<p>NOTE: if using ros built from source (and not installed under /opt/ros/* apply the following patch to librealsense:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">diff --git a/CMakeLists.txt b/CMakeLists.txt\nindex d6ed86e1..784da760 100644\n<span class=\"token coord\">--- a/CMakeLists.txt</span>\n<span class=\"token coord\">+++ b/CMakeLists.txt</span>\n@@ -37,10 +37,8 @@ assign_version_property(PATCH)\n<span class=\"token unchanged\"> set(REALSENSE_VERSION_STRING ${REALSENSE_VERSION_MAJOR}.${REALSENSE_VERSION_MINOR}.${REALSENSE_VERSION_PATCH})\n infoValue(REALSENSE_VERSION_STRING)\n</span>\n<span class=\"token deleted-sign deleted\">-IF(DEFINED CMAKE_PREFIX_PATH)\n-  IF(\"${CMAKE_PREFIX_PATH}\" MATCHES \"/opt/ros\")\n-    set(ROS_BUILD_TYPE TRUE)\n-  ENDIF()\n</span><span class=\"token inserted-sign inserted\">+IF(DEFINED CATKIN_DEVEL_PREFIX)\n+  set(ROS_BUILD_TYPE TRUE)\n</span><span class=\"token unchanged\"> ENDIF()\n</span>\n<span class=\"token unchanged\"> IF (${ROS_BUILD_TYPE})</span></code></pre></div>\n<p>Also if you are using gcc7 you probably need the next patch as well:</p>\n<p>librealsense_gcc7.diff:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">diff --git a/src/types.h b/src/types.h\nindex 0455c836..ed3b818a 100644\n<span class=\"token coord\">--- a/src/types.h</span>\n<span class=\"token coord\">+++ b/src/types.h</span>\n<span class=\"token coord\">@@ -22,6 +22,7 @@</span>\n<span class=\"token unchanged\"> #include &amp;lt;atomic&amp;gt;\n #include &amp;lt;map&amp;gt;\n #include &amp;lt;algorithm&amp;gt;\n</span><span class=\"token inserted-sign inserted\">+#include &amp;lt;functional&amp;gt;\n</span>\n<span class=\"token unchanged\"> const uint8_t RS_STREAM_NATIVE_COUNT    = 5;\n const int RS_USER_QUEUE_SIZE = 20;</span></code></pre></div>\n<p>Please note that you need to use librealsense v1.12.1 and realsense 1.8.1 with R200 as the support was dropped in later versions.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#realsense nodelet</span>\n<span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span>\n<span class=\"token function\">git</span> clone https://github.com/intel-ros/realsense.git\n<span class=\"token function\">git</span> checkout <span class=\"token number\">1.8</span>.1</code></pre></div>\n<h3>Building and testing</h3>\n<p>You may move to the root of your workspace (ros_ws) and build it:</p>\n<p><code class=\"language-text\">catkin_make -j4</code></p>\n<p>(j4 is required to prevent the compilation failures due to RAM constraints)</p>\n<p>In case of failure check whether it is asking for some dependencies (every distributionÂ  has always a slightly different set of packages preinstalled).</p>\n<p>Now you can test if everything is working fine.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ./devel/setup.sh\n<span class=\"token comment\">#run the nodelet with default settings</span>\nroslaunch realsense_camera r200_nodelet_default.launch</code></pre></div>\n<p>Ensure to have ROS Kinetic installed on your pc and to configure properly the odroid XU4 netbios name inside your PC /etc/hosts file (all details for <a href=\"http://wiki.ros.org/ROS/NetworkSetup\">network setupÂ here</a>).</p>\n<p>then you can show the image topics from camera using:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">ROS_MASTER_URI</span><span class=\"token operator\">=</span>http://192.168.2.15:11311 rqt</code></pre></div>\n<p>Change 192.168.2.15 with the IP of your embedded linux box(Odroid XU4).</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby_test/static/d24885c06765ba8a0a9908fc0b456e0d/eeac6/Selection_033.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin: 7vw 0; max-width: 759px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 79.0513833992095%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAACeElEQVQoz42Ty08TURTGR6Ev2gSakJI+FqRNK5AwbjBNd5SdLYksQKPWhaEordLEGDZG91ITMWLTQl1JDJiQoAt158K/gBCNrHgVO7oo82id90z9OhU0pCR+OZl77r3nd849N3eIh3PPxienr9y6M5FMXZ5KjydTsImp9NXbd5P3Zm9m7idSmWvTM7DrR5ZIZ2CZB4+IGsPyDCvzvC6KuiRpggDTZVmRZFHRVE2XNV3RdM34Nq3KC5KiHjIs8XirlNrYnv12MLtVnvm6P7m5l9zcu7Gx++knXZeknf0Sx3KsIJaqfI2DqjwvVGu/ZEWFQ3ymKuu71Pr2wdvd8rs9am37O6ZrO+UvFYaq8WXqB81ykqoJmq6qmqJqUuNMGHVBlAis1WGKogm8SB+KNA1TGuU4imYZlqvQDApyXA0jw7K8IIIE3YBFRRUkuV6vv15Z9Xh9ob6+YOjcIHl+kCQvDA0NDw9HIpGBgYFgMBgKhfr7+5eKLxGM4g0YrYsGnM8XCII4a8hqs9rtdjgmk8nhcMDBlsViaW9vz2aftICXikVEIBoRHR0dXV1dVqvVZrO53W742Orp6XE6nU/n51vAi0vFZmXiSGcMYQW5kAVwb29vvlA4FUbZf/mmcGCXyxUOh3EFr5aXEYz7bgHjhJ2dnahjNpuPs6AXkiQTiUQgEHiRy7Xq2YC7u7t9Pp/H40F7xzASeb1ev9+PW3y+sHAqjGNbDMFpa2sDj7YxBWYylGtZuVBYPHFhJ4Rc+M5ls39hUQasYP7+w8doNDo6OhqLxQ2LXfyjWDzeWLk0NhYdGVlZfYNgIPg7COOtgsfL1ev/IYQhWFY0wL8BSYogaGjWu+AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/gatsby_test/static/d24885c06765ba8a0a9908fc0b456e0d/53e9f/Selection_033.webp 340w,\n/gatsby_test/static/d24885c06765ba8a0a9908fc0b456e0d/0991f/Selection_033.webp 680w,\n/gatsby_test/static/d24885c06765ba8a0a9908fc0b456e0d/d0a32/Selection_033.webp 759w\"\n          sizes=\"(max-width: 759px) 100vw, 759px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/gatsby_test/static/d24885c06765ba8a0a9908fc0b456e0d/a2595/Selection_033.png 340w,\n/gatsby_test/static/d24885c06765ba8a0a9908fc0b456e0d/2473e/Selection_033.png 680w,\n/gatsby_test/static/d24885c06765ba8a0a9908fc0b456e0d/eeac6/Selection_033.png 759w\"\n          sizes=\"(max-width: 759px) 100vw, 759px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/gatsby_test/static/d24885c06765ba8a0a9908fc0b456e0d/eeac6/Selection_033.png\"\n          alt=\"Selection 033\"\n          title=\"\"\n          src=\"/gatsby_test/static/d24885c06765ba8a0a9908fc0b456e0d/eeac6/Selection_033.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    </p>","frontmatter":{"title":"Setting up Realsense R200 on Odroid XU4 with ROS","date":"November 01, 2017","description":null,"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwAB/9oADAMBAAIQAxAAAAEjc5oKaVZf/8QAGxAAAgMAAwAAAAAAAAAAAAAAAQIDERIAEyL/2gAIAQEAAQUC7CDBK5Z4cNRu/O75/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAEREv/aAAgBAwEBPwGpZf/EABcRAQEBAQAAAAAAAAAAAAAAAAEAERL/2gAIAQIBAT8BcLtv/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERIQMSInGh/9oACAEBAAY/AuPpesdELI0ihIpSf//EABsQAQACAgMAAAAAAAAAAAAAAAEAESFRMUFx/9oACAEBAAE/IREA1pER7bS55EAuKprmCNAnfS3P/9oADAMBAAIAAwAAABAjL//EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8Qo3cIP//EABkRAQACAwAAAAAAAAAAAAAAAAEAESFRwf/aAAgBAgEBPxBAUZm7k//EAB0QAQEAAgIDAQAAAAAAAAAAAAERACExcUFRYZH/2gAIAQEAAT8QMcRyUXrrBAAJo2+nzlTQxET9yHABtd4Kaqh91l7zgpDP/9k=","aspectRatio":1.3331408775981524,"src":"/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/10fb1/DSC_0321.jpg","srcSet":"/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/467b3/DSC_0321.jpg 340w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/e1ddd/DSC_0321.jpg 680w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/10fb1/DSC_0321.jpg 1360w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/fda29/DSC_0321.jpg 2040w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/823a4/DSC_0321.jpg 2720w,\n/gatsby_test/static/69c00ef17e72af93f9ec3e2edd47d444/03d7c/DSC_0321.jpg 4618w","sizes":"(max-width: 1360px) 100vw, 1360px"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2017-11-01-setting-realsense-r200-odroid-xu4-ros/","previous":{"fields":{"slug":"/2017-09-19-539/"},"frontmatter":{"title":"Projects for Maker Faire 2017","tags":["mfr17"]}},"next":{"fields":{"slug":"/2019-09-24-nvidia-jetracer/"},"frontmatter":{"title":"NVidia JetRacer","tags":["JetRacer","Jetson nano","Nvidia","ROS"]}}}}}